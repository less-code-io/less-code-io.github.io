(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce6637d8"],{"328a":function(e,t,a){},"3ef1":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"entity-fields-molecule"},[i("table",{staticClass:"entity-fields-molecule__table"},[e._l(e.propValue,(function(t){return i("tr",{key:t.id,staticClass:"entity-fields-molecule__table__row"},[i("td",{staticClass:"entity-fields-molecule__table__row__field"},[i("el-input",{ref:t.id+"-key",refInFor:!0,attrs:{size:"mini",disabled:"string"===typeof t.dataType||t.primaryKey},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"field.name"}})],1),"PARENTREF"===t.dataType?i("td",{staticClass:"entity-fields-molecule__table__row__type"},[i("label",[e._v("Parent")])]):e._e(),"PARENTREF"!==t.dataType?i("td",{staticClass:"entity-fields-molecule__table__row__type"},[i("el-select",{ref:t.id+"-value",refInFor:!0,attrs:{placeholder:"",size:"mini",filterable:!0},on:{change:function(a){return e.dataTypeSelected(t)}},model:{value:t.dataType,callback:function(a){e.$set(t,"dataType",a)},expression:"field.dataType"}},e._l(e.allDataTypes,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.caption}})})),1)],1):e._e(),"PARENTREF"!==t.dataType?i("td",{staticClass:"entity-fields-molecule__table__row__toolbar"},[i("el-popover",{attrs:{placement:"left",width:"300",trigger:"click"}},[i("table",{staticStyle:{width:"100%"}},[i("tr",[i("td",[i("label",[e._v("Name")])]),i("td",[i("el-input",{attrs:{size:"mini",disabled:"string"===typeof t.dataType||t.primaryKey},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"field.name"}})],1)]),i("tr",[i("td",[i("label",[e._v("Description")])]),i("td",[i("el-input",{attrs:{size:"mini"},model:{value:t.description,callback:function(a){e.$set(t,"description",a)},expression:"field.description"}})],1)]),e.getDataType(t.dataType).hasSize?i("tr",[i("td",[i("label",[e._v("Size")])]),i("td",[i("el-input",{attrs:{size:"mini"},model:{value:t.size,callback:function(a){e.$set(t,"size",a)},expression:"field.size"}})],1)]):e._e(),e.schemaType==e.SCHEMA_TYPES.GENERIC?i("tr",[i("td",[i("label",[e._v("Minimum")])]),i("td",[i("el-input",{attrs:{size:"mini"},model:{value:t.minimum,callback:function(a){e.$set(t,"minimum",a)},expression:"field.minimum"}})],1)]):e._e(),e.schemaType==e.SCHEMA_TYPES.GENERIC?i("tr",[i("td",[i("label",[e._v("Maximum")])]),i("td",[i("el-input",{attrs:{size:"mini"},model:{value:t.maximum,callback:function(a){e.$set(t,"maximum",a)},expression:"field.maximum"}})],1)]):e._e(),"string"===typeof t.dataType||t.primaryKey?e._e():i("tr",[i("td",[i("label",[e._v("Default")])]),i("td",[i("el-input",{attrs:{size:"mini"},model:{value:t.default,callback:function(a){e.$set(t,"default",a)},expression:"field.default"}})],1)]),"string"===typeof t.dataType?i("tr",[i("td",[i("label",[e._v("Relationship")])]),i("td",[i("el-select",{attrs:{placeholder:"",size:"mini",filterable:!0},model:{value:t.relationshipType,callback:function(a){e.$set(t,"relationshipType",a)},expression:"field.relationshipType"}},[i("el-option",{attrs:{value:"composition",label:"Composition"}}),i("el-option",{attrs:{value:void 0,label:"Aggregation"}}),i("el-option",{attrs:{value:"association",label:"Association"}})],1)],1)]):e._e(),t.primaryKey?e._e():i("tr",[i("td"),i("td",[i("el-checkbox",{model:{value:t.required,callback:function(a){e.$set(t,"required",a)},expression:"field.required"}},[e._v("Required")])],1)]),t.primaryKey?e._e():i("tr",[i("td"),i("td",[i("el-checkbox",{on:{change:function(a){return e.changeFieldCaption(t)}},model:{value:t.isArray,callback:function(a){e.$set(t,"isArray",a)},expression:"field.isArray"}},[e._v("Is Array")])],1)]),t.primaryKey?i("tr",[i("td"),i("td",[i("el-checkbox",{attrs:{disabled:""},model:{value:t.primaryKey,callback:function(a){e.$set(t,"primaryKey",a)},expression:"field.primaryKey"}},[e._v("Is Primary Key")])],1)]):e._e(),e.schemaType!=e.SCHEMA_TYPES.GENERIC&&(e.getDataType(t.dataType).canAutoIncrement||t.autoIncrement)?i("tr",[i("td"),i("td",[i("el-checkbox",{model:{value:t.autoIncrement,callback:function(a){e.$set(t,"autoIncrement",a)},expression:"field.autoIncrement"}},[e._v("Auto Increment")])],1)]):e._e()]),i("el-button",{attrs:{slot:"reference"},slot:"reference"},[i("img",{attrs:{src:a("bc58")}})])],1),i("button",{on:{click:function(a){return e.deleteField(t)}}},[i("img",{attrs:{src:a("4a52")}})])],1):e._e()])})),i("tr",{staticClass:"entity-fields-molecule__table__row"},[i("td",{staticClass:"entity-fields-molecule__table__row__field"},[i("el-input",{ref:e.randomId,attrs:{size:"mini"},on:{change:function(t){return e.createNewField("key",t)}},model:{value:e.newFieldData.name,callback:function(t){e.$set(e.newFieldData,"name",t)},expression:"newFieldData.name"}})],1),i("td",{staticClass:"entity-fields-molecule__table__row__type"},[i("el-select",{attrs:{placeholder:"",size:"mini",filterable:!0},model:{value:e.newFieldData.dataType,callback:function(t){e.$set(e.newFieldData,"dataType",t)},expression:"newFieldData.dataType"}},e._l(e.allDataTypes,(function(e){return i("el-option",{key:e.id,attrs:{value:e.id,label:e.caption}})})),1)],1),e._m(0)])],2)])},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("td",{staticClass:"entity-fields-molecule__table__row__toolbar-dummy"},[a("div")])}],l=(a("99af"),a("7db0"),a("b0c0"),a("a9e3"),a("2909")),r=a("5530"),s=a("a0e2"),c=a("b9f5"),o=(a("c740"),a("a434"),a("d4ec")),d=a("bee2"),u=a("99de"),p=a("7e84"),f=a("262e"),m=a("a026"),y=a("c194"),_=a("b86d"),b=a("411f"),T=a("f62c"),v=function(e){function t(){return Object(o["a"])(this,t),Object(u["a"])(this,Object(p["a"])(t).apply(this,arguments))}return Object(f["a"])(t,e),Object(d["a"])(t,[{key:"newField",value:function(e){e.propValue.push({id:Object(_["a"])(),name:"",dataType:1})}},{key:"deleteField",value:function(e,t,a){var i=e.propValue.findIndex((function(e){return e.id==a.id}));if(e.propValue.splice(i,1),"string"==typeof a.dataType){var n={src:t,dest:null,feildId:a.id};this.emitGlobalEvent(b["a"].DOCUMENT.ENTITIES_CONNECTED,n)}}},{key:"dataTypeSelected",value:function(e,t,a){var i,n=t.id,l=a.dataType,r=a.id;if(a.destEntityId){var s=e.selectedItems.editable.properties[a.destEntityId];if(s){var c=s.fields,o=c.findIndex((function(e){return e.id==a.destEntityIdField}));-1!==o&&c.splice(o,1)}delete a.destEntityId,delete a.destEntityIdField}if("string"==typeof l){if(this.changeFieldCaption(e,a),n!==l){var d=e.selectedItems.editable.properties[l];if(d){var u=d.fields,p="".concat(l,".").concat(n);a.destEntityId=l,a.destEntityIdField=p;var f={id:p,entityId:n,isArray:"association"===a.relationshipType&&a.isArray,dataType:"PARENTREF"};a.parentRefField=p;var y=e.allDataTypes.find((function(e){return e.id==n})),_=null;_="association"===a.relationshipType||f.isArray?"".concat(y.caption,"s"):y.caption,f.name=Object(T["simpalizeFirstLetter"])(_),u.push(m["default"].observable(f))}}i={src:n,dest:l,feildId:r}}else i={src:n,dest:null,feildId:r};this.emitGlobalEvent(b["a"].DOCUMENT.ENTITIES_CONNECTED,i)}},{key:"changeFieldCaption",value:function(e,t){if("string"===typeof t.dataType){var a=e.allDataTypes.find((function(e){return e.id==t.dataType}));t.name=Object(T["simpalizeFirstLetter"])(t.isArray?"".concat(a.caption,"s"):a.caption)}}},{key:"removeParentRefField",value:function(){}}]),t}(y["a"]),h=new v,E={name:"EntityFieldsMolecule",beforeCreate:function(){h.hook(this)},components:{},methods:{getDataType:function(e){return this.allDataTypes.find((function(t){return t.id===e}))||{}},deleteField:function(e){h.deleteField(this,this.selectedBlock.id,e)},dataTypeSelected:function(e){h.dataTypeSelected(this,this.selectedBlock,e)},changeFieldCaption:function(e){h.changeFieldCaption(this,e)},createNewField:function(){var e=this;if(this.propValue){var t={id:Object(s["f"])(),name:this.newFieldData.name,dataType:1};this.propValue.push(t),this.newFieldData={name:"",dataType:1},this.$nextTick((function(){var t=e.$refs[e.randomId];t.focus()}))}}},props:{propKey:String,propValue:Array,schemaType:Number},data:function(){return{SCHEMA_TYPES:c["SCHEMA_TYPES"],newFieldData:{name:"",dataType:1},randomId:"newfield-".concat(Object(s["f"])())}},computed:Object(r["a"])({allDataTypes:function(){return[].concat(Object(l["a"])(c["DATA_TYPES"][this.schemaType]),Object(l["a"])(this.customDataTypes))}},h.getters("customDataTypes","selectedBlock","selectedItems"))},I=E,k=(a("f0c7"),a("2877")),F=Object(k["a"])(I,i,n,!1,null,"3dbb2cac",null);t["default"]=F.exports},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var i=a("1d80"),n=a("5899"),l="["+n+"]",r=RegExp("^"+l+l+"*"),s=RegExp(l+l+"*$"),c=function(e){return function(t){var a=String(i(t));return 1&e&&(a=a.replace(r,"")),2&e&&(a=a.replace(s,"")),a}};e.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(e,t,a){var i=a("861d"),n=a("d2bb");e.exports=function(e,t,a){var l,r;return n&&"function"==typeof(l=t.constructor)&&l!==a&&i(r=l.prototype)&&r!==a.prototype&&n(e,r),e}},a9e3:function(e,t,a){"use strict";var i=a("83ab"),n=a("da84"),l=a("94ca"),r=a("6eeb"),s=a("5135"),c=a("c6b6"),o=a("7156"),d=a("c04e"),u=a("d039"),p=a("7c73"),f=a("241c").f,m=a("06cf").f,y=a("9bf2").f,_=a("58a8").trim,b="Number",T=n[b],v=T.prototype,h=c(p(v))==b,E=function(e){var t,a,i,n,l,r,s,c,o=d(e,!1);if("string"==typeof o&&o.length>2)if(o=_(o),t=o.charCodeAt(0),43===t||45===t){if(a=o.charCodeAt(2),88===a||120===a)return NaN}else if(48===t){switch(o.charCodeAt(1)){case 66:case 98:i=2,n=49;break;case 79:case 111:i=8,n=55;break;default:return+o}for(l=o.slice(2),r=l.length,s=0;s<r;s++)if(c=l.charCodeAt(s),c<48||c>n)return NaN;return parseInt(l,i)}return+o};if(l(b,!T(" 0o1")||!T("0b1")||T("+0x1"))){for(var I,k=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof k&&(h?u((function(){v.valueOf.call(a)})):c(a)!=b)?o(new T(E(t)),a,k):E(t)},F=i?f(T):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),g=0;F.length>g;g++)s(T,I=F[g])&&!s(k,I)&&y(k,I,m(T,I));k.prototype=v,v.constructor=k,r(n,b,k)}},f0c7:function(e,t,a){"use strict";var i=a("328a"),n=a.n(i);n.a}}]);
//# sourceMappingURL=chunk-ce6637d8.ff11c7c0.js.map